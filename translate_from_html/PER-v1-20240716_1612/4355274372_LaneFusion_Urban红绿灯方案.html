<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title> LANEFUSION Urban Red and Green Light Scheme  - wave 3 development</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

    </head>

<body pageid="2458153956">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">wave3</span>
                    <img class="space-logo" src="global.logo" />
                </h1>
                <a href="2458153956_PER.html" class="ht-space-link">
                    <h2>wave 3 development</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=4355274372"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="2458153956_PER.html">wave 3 development</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="1741913013_Map_and_Loc.html">Map and Loc</a></li>
                                                                                                         <li class="shortcut"><a href="1834779678_01_Map.html">01_Map</a></li>
                                                                                     <li><a href="4355270061_LaneFusion_docs.html">LaneFusion docs</a></li>
                                                            </ul>
</div>            <h1 id="src-4355274372"> <span> LANEFUSION Urban Red and Green Light Scheme </span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

<p   
><strong class=" "> Viper traffic light input </strong></p>
<p   
><strong class=" "> Input divided into two ways: </strong></p>
<ol class=" "><li class=" "><p   
> Viper Traffic Light Object: Single -frame target detection results, 3D positions under EGO </p>
</li><li class=" "><p   
> VIPER Traffic Light Decision: The target detection results pass through the network, and whether the current four directions (straight, left, right, turn around, turn around) </p>
</li><li class=" "><p   
> There is no correspondence between DeCision and Traffic Light Object. Decision has no location information </p>
</li><li class=" "><p  class="auto-cursor-target" 
> viper traffic light problem </p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> category </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Ticket number </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Problem Description </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Decision jump variant class </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-103951">CNWVIII-103951</a></p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Yellow Flash Friends is recognized as red and yellow lights </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-102773">CNWVIII-102773</a></p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Yellow Flash Lantern is misdiagnosed as Yellow, Black, YELLOW_BLINK </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-101867">CNWVIII-101867</a>></p>
<p   
><br/></p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Green flashing green </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Object jumping </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-102472">CNWVIII-102472</a></p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Lights object sometimes </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Interference by other lights causes identification errors </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-104145">CNWVIII-104145</a></p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Two light signs in the upper and lower lamps </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-103639">CNWVIII-103639</a></p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Left rotating light is disturbed by straight lights </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
</li></ol><p   
><br/></p>
<p   
><strong class=" "> Planning's approximate solution at the intersection in Urban scene and the use of SF output </strong></p>
<ol class=" "><li class=" "><p   
> Get Global Route from Map Service, find the Related ROAD ELEMENT LIST contained in Global Route </p>
</li><li class=" "><p   
> Search in the map element to search whether there is Stopline for the calculation of the parking waiting location </p>
</li><li class=" "><p   
> Search in the map element to search whether there is MaptrafficLight, which is used to confirm the lane related information </p>
</li><li class=" "><p   
> After satisfying the Map Stopline+Trafflicht information, confirm the VIPER's decision information for viewing the state of the light </p>
</li></ol><p   
><br/></p>
<p   
><strong class=" "> Planning's demand for red and green lights in the intersection </strong></p>
<ol class=" "><li class=" "><p   
> Map exists Stopline </p>
</li><li class=" "><p   
> MAP exists in trafflicLight </p>
</li><li class=" "><p   
> VIPER output DECISION and SF interface transparent </p>
</li></ol><p   
><br/></p>
<p   
><strong class=" "> SF's performance on upstream expectations </strong></p>
<ol class=" "><li class=" "><p   
> MAP information is complete, the Internet attribute meets the judgment needs </p>
</li><li class=" "><p   
> Viper Decision stable and accurate </p>
</li></ol>    <div class="section section-1" id="src-4355274372_safe-id-TGFuZUZ1c2lvblVyYmFu57qi57u_54Gv5pa55qGILTEuT1RBMe-8jE9UQTEuNemAj-S8oOaooeW8jw">
        <h1 class="heading "><span> 1. OTA1, OTA1.5 transparent mode </span></h1>
<ul class=" "><li class=" "><p   
> Mainly update development items </p>
<ul class=" "><li class=" "><p   
> Increase the judgment of the Internet scene </p>
</li><li class=" "><p   
> Increase whether there is a MAP Traffic Light judgment in front of 100M </p>
</li></ul></li><li class=" "><p   
> issues that need resolving </p>
<ul class=" "><li class=" "><p   
> For the lack of associated with red and green lights in MAP, Planning ignores VIPER Decision cross the intersection </p>
</li></ul></li><li class=" "><p   
> Design </p>
<ul class=" "><li class=" "><p   
> After judging the intersection in front of the intersection or the red and green lights of the map, the last four of the VIPER Decision at SF Road_Element_list </p>
</li><li class=" "><p   
> Because Viper Traffic Light lacks effective and stable position estimates and output, the correlation effect with MAP TL is poor, so the two do not do a special association </p>
</li></ul></li></ul>    </div>
    <div class="section section-1" id="src-4355274372_safe-id-TGFuZUZ1c2lvblVyYmFu57qi57u_54Gv5pa55qGILTIu6L-H5ruk5qih5byPT1RBMg">
        <h1 class="heading "><span> 2. Filter mode OTA2 </span></h1>
<ul class=" "><li class=" ">    <h4 id="src-4355274372_safe-id-TGFuZUZ1c2lvblVyYmFu57qi57u_54Gv5pa55qGILeiDjOaZrw" class="heading "><span> background </span></h4>
</li></ul><p   style="margin-left:30px;"
> Mainly solve the closer intersection. The red and green lights in the distance allow the self -car to stop the nearby Stopline: </p>
<p   style="margin-left:30px;"
><a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-88173">CNWVIII-88173</a> <a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-85425">CNWVIII-85425</a> <a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-87935">CNWVIII-87935</a></p>
<ul class=" "><li class=" "><ul class=" "><li class=" "><p   
> There are multiple traffic light objects: </p>
</li></ul></li></ul><p   style="margin-left:90px;"
>O:\Engineering\domain\WAVE3\00_DataExchange\000_Problem_Data\01_Driving\DAPAI 2\20240326\20240326214953</p>
<p   style="margin-left:90px;"
>O:\Engineering\domain\WAVE3\00_DataExchange\000_Problem_Data\01_Driving\DAPAI 2\20240326\20240326214903</p>
<p   style="margin-left:90px;"
> If it is a relatively close Traffic Light, the RoadElement Confidence> 0.5 emitted by SF.otherwise < 0.5</p>
<ul class=" "><li class=" "><p   
> Various intersections <br/></p>
<ul class=" "><li class=" "><p   
> Only Stopline </p>
</li><li class=" "><img  class="confluence-embedded-image"  src="images/confluence/download/attachments/4355274372/image-2024-4-15_10-17-22-version-1-modificationdate-1718183199000-api-v2.png" alt="images/confluence/download/attachments/4355274372/image-2024-4-15_10-17-22-version-1-modificationdate-1718183199000-api-v2.png"  height="250" />
    </li><li class=" "><p   
> There are traffic light, stopline, no interest </p>
</li><li class=" "><img  class="confluence-embedded-image"  src="images/confluence/download/attachments/4355274372/image-2024-4-15_10-18-6-version-1-modificationdate-1718183199000-api-v2.png" alt="images/confluence/download/attachments/4355274372/image-2024-4-15_10-18-6-version-1-modificationdate-1718183199000-api-v2.png"  height="250" />
    </li><li class=" "><p   
> Only Internet: </p>
</li><li class=" "><p   
> Map of the Map of Intersection: Motor vehicles can pass horizontally </p>
</li><li class=" "><img  class="confluence-embedded-image"  src="images/confluence/download/attachments/4355274372/image-2024-4-15_10-22-1-version-1-modificationdate-1718183199000-api-v2.png" alt="images/confluence/download/attachments/4355274372/image-2024-4-15_10-22-1-version-1-modificationdate-1718183199000-api-v2.png"  height="250" />
    </li><li class=" "><p   
> Stopline and INTERSEON in front are not together </p>
</li><li class=" "><img  class="confluence-embedded-image"  src="images/confluence/download/attachments/4355274372/image-2024-4-15_17-28-15-version-1-modificationdate-1718183199000-api-v2.png" alt="images/confluence/download/attachments/4355274372/image-2024-4-15_17-28-15-version-1-modificationdate-1718183199000-api-v2.png"  height="250" />
    </li></ul></li><li class=" "><p   
>traffic light corner cases</p>
</li><li class=" "><img  class="confluence-embedded-image"  src="images/confluence/download/attachments/4355274372/image-2024-6-12_13-49-46-version-1-modificationdate-1718183198000-api-v2.png" alt="images/confluence/download/attachments/4355274372/image-2024-6-12_13-49-46-version-1-modificationdate-1718183198000-api-v2.png"  height="250" />
    </li><li class=" ">    <h4 id="src-4355274372_safe-id-TGFuZUZ1c2lvblVyYmFu57qi57u_54Gv5pa55qGILeaWueahiA" class="heading "><span> plan </span></h4>
<ul class=" "><li class=" "><p   
>Traffic light blocking check:</p>
<ul class=" "><li class=" "><p   
> In order to deal with the problem of traffic lights </p>
</li><li class=" "><p   
> When the map has a related traffic light, but the DeCision detection is unknown, and the current confidence = 0.3: </p>
<ul class=" "><li class=" "><p   
> Set the Decision corresponding to the current lane Turntype to UNKNOWN, and the confidence to 0.8 </p>
</li></ul></li></ul></li><li class=" "><p   
>Multi-stopline check</p>
<ul class=" "><li class=" "><p   
> In order to deal with the map Traffic Light error, multiple stopline problems </p>
</li><li class=" "><p   
> When confident = 0.3, and there are multiple stoplines in front of the same section, set the confidence to 0.8, and set the DECISION color to UNKNOWN </p>
</li></ul></li></ul></li></ul><p   
><img  class="drawio-diagram-image drawio-image-border"  src="images/confluence/download/attachments/4355274372/traffic_light_filter-version-1-modificationdate-1718183198000-api-v2.png" alt="images/confluence/download/attachments/4355274372/traffic_light_filter-version-1-modificationdate-1718183198000-api-v2.png" width="1413"  />
    </p>
<p   
><br/></p>
    <div class="section section-2" id="src-4355274372_safe-id-TGFuZUZ1c2lvblVyYmFu57qi57u_54Gv5pa55qGILU9UQTLnuqLnu7_nga_lhbjlnovpl67popg">
        <h2 class="heading "><span> OTA2 Red and Green Light Typical Questions </span></h2>
<ol class=" "><li class=" "><p   
> VIPER Traffic Light Object position is not allowed and erroneous correlation caused by misunderstanding <a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-97175">CNWVIII-97175</a> <a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-99370">CNWVIII-99370</a></p>
</li><li class=" "><p   
> Viper Decision error: <a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-92736">CNWVIII-92736</a> <a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-90579">CNWVIII-90579</a> <a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-95118">CNWVIII-95118</a> <a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-99581">CNWVIII-99581</a></p>
<ol class=" "><li class=" "><p   
> Complex intersection decision error <a   href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-98112?src=confmacro">CNWVIII-98112</a> - Jira issue doesn't exist or you don't have permission to view it.</p>
</li><li class=" "><img  class="confluence-embedded-image panning confluence-external-resource"  src="images/rb-tracker.bosch.com/tracker08/secure/attachment/3246805/2024-05-13_15h08_40.png" alt="images/rb-tracker.bosch.com/tracker08/secure/attachment/3246805/2024-05-13_15h08_40.png"  height="250" />
    </li></ol></li><li class=" "><p   
> Pedestrians' red and green lights are not allowed to be allowed to filter such traffic lights, which eventually leads to errors. <a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-95439">CNWVIII-95439</a></p>
</li><li class=" "><p   
> The error association of the red and green lights is similar to the same distance: <a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-95996">CNWVIII-95996</a></p>
</li><li class=" "><p   
> The side effects caused by other pockets: </p>
<ol class=" "><li class=" "><p  class="auto-cursor-target" 
> Map Red and Green Light/STOPLINE Hanging error problem: <a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-97088">CNWVIII-97088</a> <a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-100076">CNWVIII-100076</a></p>
<ol class=" "><li class=" "><p   
><a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-100076">CNWVIII-100076</a> SF pressed Planning to make a map error, but Planning can’t pass the intersection </p>
</li></ol></li><li class=" "><p   
> The problem of red and green light blocking judgment, 0509DEV has been repaired by a version is being re -measured: <a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-96412">CNWVIII-96412</a> <a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-95426">CNWVIII-95426</a> <a  class="external-link" href="https://rb-tracker.bosch.com/tracker08/browse/CNWVIII-96949">CNWVIII-96949</a></p>
</li></ol></li></ol><p   
><br/></p>
    </div>
    <div class="section section-2" id="src-4355274372_safe-id-TGFuZUZ1c2lvblVyYmFu57qi57u_54Gv5pa55qGILU9UQTPov4fmu6TmqKHlvI92Mi4w">
        <h2 class="heading "><span> OTA3 filter mode v2.0 </span></h2>
<ol class=" "><li class=" "><p   
> Expand the DEBOUNCE range before and after the stop line, from 4M after the stop line to -25m to 4m </p>
</li><li class=" "><p   
> Increase deep filtering of red and green light objects </p>
</li><li class=" "><p   
> Optimize the association process and increase TL-TL association </p>
</li></ol><p   
><br/></p>
    </div>
    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="4379428813_LaneFusion_mismatch_TR.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>LaneFusion mismatch TR</span>
        </a>
                <a href="3168148151_lite-map.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>lite-map</span>
        </a>
    </nav>    
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>


    <script src="assets/js/expand-macro.js"></script>
</body>
</html>
