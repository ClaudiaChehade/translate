<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title> Online Calibration Agreement Document -Wave 3 Development </title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

    </head>

<body pageid="2458153956">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">wave3</span>
                    <img class="space-logo" src="global.logo" />
                </h1>
                <a href="2458153956_PER.html" class="ht-space-link">
                    <h2>wave 3 development</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=4475305623"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="2458153956_PER.html">wave 3 development</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="1741913013_Map_and_Loc.html">Map and Loc</a></li>
                                                                                                         <li class="shortcut"><a href="2453670978_03_Calibration.html">03_Calibration</a></li>
                                                                                     <li><a href="3515778236_01_Calib_Development.html">01 Calib Development</a></li>
                                                            </ul>
</div>            <h1 id="src-4475305623"> <span> Online Calibration protocol document </span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

<p   
><br/></p>
<p   
> Overall Enter output interface <a   href="attachments/4475305972/1/online_calibration_runnable_%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%8E%A5%E5%8F%A3.xlsx"> Online Calibration Runnable Enter Output interface .xlsx </a></p>
<p   
><br/></p>
    <div class="section section-1" id="src-4475305623_safe-id-T25saW5lQ2FsaWJyYXRpb27ljY_orq7mlofmoaMtT0ZFeHRyYWN0b3I">
        <h1 class="heading "><span>OF Extractor</span></h1>
    <div  class="tablewrap">
        <table class="relative-table wrapped confluenceTable">
                    <colgroup>
                                    <col  width="51.1352%"/>
                                    <col  width="48.8648%"/>
                            </colgroup>
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Output port </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Remark </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <pre class=" ">temporal_of_front</pre>            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Overwhelming flow of front -view camera </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <pre class=" ">temporal_of_rear</pre>            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> The order of the rear view of the camera </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <pre class=" ">temporal_of_left</pre>            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Sequential flow when you look at the camera on the left </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <pre class=" ">temporal_of_right</pre>            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Sequential flow of the camera at the right view </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>spatial_of_left_front</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Left/front space flow </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>spatial_of_left_rear</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Left/post -space flow </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>spatial_of_right_front</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Right/front space light current </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>spatial_of_right_rear</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Right/post -space light flow </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>of_extractor_status</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> state </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <div class="section section-2" id="src-4475305623_safe-id-T25saW5lQ2FsaWJyYXRpb27ljY_orq7mlofmoaMtdGVtcG9yYWwvc3BhdGlhbOWFiea1geaVsOaNruWNj-iuruWumuS5iQ">
        <h2 class="heading "><span> Temporal/Spatial light flow data protocol definition </span></h2>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">const</code><code class="plain"> vfc::uint32_t MAX_FLOW_NUM = 1000;</code></div>
<div class="line"> </div>
<div class="line"><code class="keyword">struct</code><code class="plain"> Flow {</code></div>
<div class="line"><code class="plain">    vfc::float32_t m_startX; </code><code class="comments">// pixel coordinate</code></div>
<div class="line"><code class="plain">    vfc::float32_t m_startY;</code></div>
<div class="line"><code class="plain">    vfc::float32_t m_endX;</code></div>
<div class="line"><code class="plain">    vfc::float32_t m_endY;</code></div>
<div class="line"><code class="plain">};</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="keyword">enum</code><code class="plain"> </code><code class="keyword">class</code><code class="plain"> EFlowStatus : vfc::int32_t</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    NORMAL = 0u,</code></div>
<div class="line"><code class="plain">    ERROR  = 1u,</code></div>
<div class="line"><code class="plain">};</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="keyword">enum</code><code class="plain"> ETabCameras : vfc::int32_t</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    CAMERA_REAR    = 0, </code><code class="comments">// index of camera rear</code></div>
<div class="line"><code class="plain">    CAMERA_LEFT    = 1, </code><code class="comments">// index of camera left</code></div>
<div class="line"><code class="plain">    CAMERA_FRONT   = 2, </code><code class="comments">// index of camera front</code></div>
<div class="line"><code class="plain">    CAMERA_RIGHT   = 3, </code><code class="comments">// index of camera right</code></div>
<div class="line"><code class="plain">    CAMERA_AR      = 4, </code><code class="comments">// index of augmented reality camera</code></div>
<div class="line"><code class="plain">    CAMERA_ALL     = 4, </code><code class="comments">// number of platform cameras</code></div>
<div class="line"><code class="plain">    CAMERA_ALL_CST = 5  </code><code class="comments">// number of platform and customer cameras</code></div>
<div class="line"><code class="plain">};</code></div>
<div class="line"> </div>
<div class="line"><code class="keyword">struct</code><code class="plain"> TemporalFlowVector {</code></div>
<div class="line"><code class="plain">    vfc::uint32_t   m_imageNumber;                </code><code class="comments">//!< current image number of cv chain</code></div>
<div class="line"><code class="plain">    ETabCameras     m_cameraId_e;                 </code><code class="comments">//!< Id of cam</code></div>
<div class="line"><code class="plain">    vfc::uint32_t   m_currentTimeStamp;           </code><code class="comments">//!< timestamp of current image</code></div>
<div class="line"><code class="plain">    vfc::uint32_t   m_previousTimeStamp;          </code><code class="comments">//!< timestamp of previous image</code></div>
<div class="line"><code class="plain">    vfc::TFixedVector<Flow, MAX_FLOW_NUM> m_flow;</code></div>
<div class="line"><code class="plain">    EFlowStatus m_status;</code></div>
<div class="line"><code class="plain">};</code></div>
<div class="line"> </div>
<div class="line"><code class="keyword">struct</code><code class="plain"> SpatialFlowVector{</code></div>
<div class="line"><code class="plain">    vfc::uint32_t   m_userID;                       </code><code class="comments">//! user specified ID, combination of m_gloablID and m_userID must be unique, e.g., a version</code></div>
<div class="line"><code class="plain">    vfc::uint32_t   m_imageNumber;                  </code><code class="comments">//!< current image number of cv chain</code></div>
<div class="line"><code class="plain">    ETabCameras     m_cameraId1_e;         			</code><code class="comments">//!< Id of ref cam</code></div>
<div class="line"><code class="plain">    ETabCameras     m_cameraId2_e;         			</code><code class="comments">//!< Id of side cam</code></div>
<div class="line"><code class="plain">    vfc::uint32_t   m_currentTimeStamp;             </code><code class="comments">//!< timestamp of current image</code></div>
<div class="line"><code class="plain">    vfc::TFixedVector<Flow, MAX_FLOW_NUM> m_flow;</code></div>
<div class="line"><code class="plain">	EFlowStatus     m_status;</code></div>
<div class="line"><code class="plain">};</code></div>
</div>
    </div>
<p   
><br/></p>
    </div>
    </div>
    <div class="section section-1" id="src-4475305623_safe-id-T25saW5lQ2FsaWJyYXRpb27ljY_orq7mlofmoaMtU3RhdGVNYW5hZ2Vy">
        <h1 class="heading "><span>State Manager</span></h1>
    <div class="section section-2" id="src-4475305623_safe-id-T25saW5lQ2FsaWJyYXRpb27ljY_orq7mlofmoaMt6L6T5YWl">
        <h2 class="heading "><span> enter </span></h2>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> enter Port</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Remark </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>vehicle_variant</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>vin</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>vehicle_status</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>offline_sensor_calib_parameter</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>online_sensor_calib_parameter</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>diag_request</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>cvalin_chassis</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>cvalin_body</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>camera_intrinsics</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>lidar_status</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>fct_overall_state</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>viper_image_odd</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p   
><br/></p>
<p   
> Module opening logo </p>
<p   
> Through the configuration file, you can control the opening/closing some functions </p>
    </div>
    <div class="section section-2" id="src-4475305623_safe-id-T25saW5lQ2FsaWJyYXRpb27ljY_orq7mlofmoaMt6L6T5Ye6">
        <h2 class="heading "><span> Output </span></h2>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Output port </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Remark </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>oncal_control</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <pre class=" "> C2W system overall control instruction </pre>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><del class=" ">oncal_event</del></p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><del class=" "> C2W event instruction, Struct CCALCONC2WEVENTOUTPUT, define the following content </del></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>xxtrinsic</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <pre class=" "> Internal and external parameters, Struct CCODING2C2WSINGLESTRUCT, define the following content </pre>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>vehicle code</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>diag_response???</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>state_manager_status</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p   
><br/></p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">enum</code><code class="plain"> </code><code class="keyword">class</code><code class="plain"> SensorId : vfc::uint8_t </code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    SI_NOT_SUPPORT = 0u,</code></div>
<div class="line"><code class="plain">    SI_IMU,                </code></div>
<div class="line"><code class="plain">    SI_FRONT_LIDAR,                  </code><code class="comments">// Front Lidar Module       (FLM)</code></div>
<div class="line"><code class="plain">    SI_LEFT_LIDAR,                   </code><code class="comments">// Front Left Lidar Module  (FLLM)</code></div>
<div class="line"><code class="plain">    SI_RIGHT_LIDAR,                  </code><code class="comments">// Front Right Lidar Module (FRLM)</code></div>
<div class="line"><code class="plain">    SI_SIDE_VIEW_CAMERA_FRONT_TELE,  </code><code class="comments">// Front Long View Camera   (FLVC)</code></div>
<div class="line"><code class="plain">    SI_SIDE_VIEW_CAMERA_FRONT_WIDE,  </code><code class="comments">// Front Wide View Camera   (FWVC)</code></div>
<div class="line"><code class="plain">    SI_SIDE_VIEW_CAMERA_FRONT_LEFT,  </code><code class="comments">// Left Front Wing Camera   (LFWC)</code></div>
<div class="line"><code class="plain">    SI_SIDE_VIEW_CAMERA_FRONT_RIGHT, </code><code class="comments">// Right Front Wing Camera  (RFWC)</code></div>
<div class="line"><code class="plain">    SI_SIDE_VIEW_CAMERA_REAR_LEFT,   </code><code class="comments">// Left Rear Wing Camera    (LRWC)</code></div>
<div class="line"><code class="plain">    SI_SIDE_VIEW_CAMERA_REAR_RIGHT,  </code><code class="comments">// Right RearWing Camera    (RRWC)</code></div>
<div class="line"><code class="plain">    SI_SIDE_VIEW_CAMERA_REAR,        </code><code class="comments">// Rear Center Camera       (RCC)</code></div>
<div class="line"><code class="plain">    SI_SURROUND_VIEW_CAMERA_FRONT,   </code><code class="comments">// Front Center Around View Camera (FCAVC)</code></div>
<div class="line"><code class="plain">    SI_SURROUND_VIEW_CAMERA_REAR,    </code><code class="comments">// Rear Center Around View Camera  (RCAVC)</code></div>
<div class="line"><code class="plain">    SI_SURROUND_VIEW_CAMERA_LEFT,    </code><code class="comments">// Left Side Around View Camera    (LSAVC)</code></div>
<div class="line"><code class="plain">    SI_SURROUND_VIEW_CAMERA_RIGHT,   </code><code class="comments">// Right Side Around View Camera   (RSAVC)</code></div>
<div class="line"><code class="plain">    SI_MAX</code></div>
<div class="line"><code class="plain">};</code></div>
<div class="line"> </div>
<div class="line"><code class="keyword">enum</code><code class="plain"> </code><code class="keyword">class</code><code class="plain"> CameraModel : vfc::uint8_t </code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    CM_NOT_SUPPORT = 0u, </code></div>
<div class="line"><code class="plain">    CM_PINHOLE,           </code><code class="comments">// [k1 k2 k3 p1 p2] total=5</code></div>
<div class="line"><code class="plain">    CM_FISHEYE,           </code><code class="comments">// [d1 d2 d3 d4] total=4</code></div>
<div class="line"><code class="plain">    CM_SCARAMUZZA,        </code><code class="comments">// [ac ad ae] [pol0 ... pol4] [inv_pol0 ... inv_pol19] total=28</code></div>
<div class="line"><code class="plain">    CM_MAX</code></div>
<div class="line"><code class="plain">};</code></div>
<div class="line"> </div>
<div class="line"><code class="keyword">struct</code><code class="plain"> SensorParam</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    ara_com_gw::SensorId sensor_id = ara_com_gw::SensorId::SI_NOT_SUPPORT;</code></div>
<div class="line"><code class="plain">    std::string sensor_name;</code></div>
<div class="line"><code class="plain">    </code><code class="color1">int</code><code class="plain"> width = -1, height = -1; </code><code class="comments">// image or range_image</code></div>
<div class="line"><code class="plain">    </code><code class="color1">float</code><code class="plain"> fx = 0.0, fy = 0.0;</code></div>
<div class="line"><code class="plain">    </code><code class="color1">float</code><code class="plain"> cx = 0.0, cy = 0.0;</code></div>
<div class="line"><code class="plain">    CameraModel camera_model = CameraModel::CM_NOT_SUPPORT;</code></div>
<div class="line"><code class="plain">    </code><code class="comments">/*</code></div>
<div class="line"><code class="comments">    camera_pinhole : k1 k2 k3 k4 k5 k6 p1 p2</code></div>
<div class="line"><code class="comments">    camera_fisheye : p1 p2 p3 p4</code></div>
<div class="line"><code class="comments">    camera_ocam    : c d e pol... inv_pol...</code></div>
<div class="line"><code class="comments">    */</code></div>
<div class="line"><code class="plain">    std::vector<</code><code class="color1">float</code><code class="plain">> parameters;</code></div>
<div class="line"><code class="plain">};</code></div>
<div class="line"> </div>
<div class="line"><code class="keyword">enum</code><code class="plain"> ETabCameras : vfc::int32_t</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    CAMERA_REAR    = 0, </code><code class="comments">// index of camera rear</code></div>
<div class="line"><code class="plain">    CAMERA_LEFT    = 1, </code><code class="comments">// index of camera left</code></div>
<div class="line"><code class="plain">    CAMERA_FRONT   = 2, </code><code class="comments">// index of camera front</code></div>
<div class="line"><code class="plain">    CAMERA_RIGHT   = 3, </code><code class="comments">// index of camera right</code></div>
<div class="line"><code class="plain">    CAMERA_ALL     = 4, </code><code class="comments">// number of platform cameras</code></div>
<div class="line"><code class="plain">    CAMERA_ALL_CST = 5  </code><code class="comments">// number of platform and customer cameras</code></div>
<div class="line"><code class="plain">};</code></div>
<div class="line"> </div>
<div class="line"><code class="keyword">enum</code><code class="plain"> ECamAvailabilityState : vfc::uint32_t</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    DISPLACED          = 0U,    </code><code class="comments">//!< Camera is not in position (e.g. mirrors folded, trunk open, etc)</code></div>
<div class="line"><code class="plain">    FULLY_COVERED      = 1U,    </code><code class="comments">//!< Camera is fully covered (e.g. flap).</code></div>
<div class="line"><code class="plain">    PARTIALLY_COVERED  = 2U,    </code><code class="comments">//!< Camera is partially covered (e.g. Rear cam: trunk closed, trailer attached / Side cams: cam in position (doors/mirrors ok), rear side door open )</code></div>
<div class="line"><code class="plain">    CAM_ERROR          = 3U,    </code><code class="comments">//!< EVM Event is deactivating camera chain (in particular C2W)</code></div>
<div class="line"><code class="plain">    RUNNING            = 4U     </code><code class="comments">//!< Camera is available</code></div>
<div class="line"><code class="plain">};</code></div>
<div class="line"> </div>
<div class="line"><code class="keyword">enum</code><code class="plain"> EC2WActivationFlags : vfc::uint32_t</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    C2W_NOT_ACTIVE                        = 0x0000, </code><code class="comments">//!< C2W subsystem not active (i.e. no estimation of extrinsic calibration or ego motion)</code></div>
<div class="line"><code class="plain">    C2W_WORLD_CALIB_ACTIVE                = 0x0001, </code><code class="comments">//!< Front/Rear (SVS), rear (Entry), AR Cam calib active</code></div>
<div class="line"><code class="plain">    C2W_RELATIVE_CALIB_ACTIVE             = 0x0002, </code><code class="comments">//!< Relative calibration (SVS) active</code></div>
<div class="line"><code class="plain">    C2W_HEIGHT_ESTIMATON_ACTIVE           = 0x0004, </code><code class="comments">//!< Height estimation active</code></div>
<div class="line"><code class="plain">};</code></div>
<div class="line"> </div>
<div class="line"><code class="keyword">enum</code><code class="plain"> ETrafoUsageState : vfc::int32_t</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    PRIMARY_TRAFO   = 0, </code><code class="comments">//!< use primary trafo</code></div>
<div class="line"><code class="plain">    SECONDARY_TRAFO = 1, </code><code class="comments">//!< use secondary trafo</code></div>
<div class="line"><code class="plain">    INVALID         = 2, </code><code class="comments">//!< both should not be used, neither primary nor secondary extrinsic fit to current camera position and/or orientation</code></div>
<div class="line"><code class="plain">};</code></div>
<div class="line"> </div>
<div class="line"><code class="keyword">enum</code><code class="plain"> EGCMCalibrationError  : vfc::uint32_t </code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    GCM_CALIB_ERROR_NONE                    = 0, </code><code class="comments">//!< No calibration error.</code></div>
<div class="line"><code class="plain">    GCM_CALIB_ERROR_TIMEOUT                 = 1, </code><code class="comments">//!< Calibration timeout error (took to long to reach FULLY_CALIBRATED).</code></div>
<div class="line"><code class="plain">    GCM_CALIB_ERROR_DEVIATION               = 2, </code><code class="comments">//!< Calbration deviation error (calibration state reached FULLY_CALIBRATED, but angles deviate significantly from expected values).</code></div>
<div class="line"><code class="plain">    GCM_CALIB_ERROR_TIMEOUT_AND_DEVIATION   = 3  </code><code class="comments">//!< Both timeout and deviation errors are present.</code></div>
<div class="line"><code class="plain">};</code></div>
<div class="line"> </div>
<div class="line"><code class="keyword">enum</code><code class="plain"> ETrunkMode : vfc::uint32_t</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    TRUNK_SIGNAL_IS_RELEVANT        = 0U,   </code><code class="comments">//!< In case trunk signal is relevant</code></div>
<div class="line"><code class="plain">    TRUNK_SIGNAL_IS_NOT_RELEVANT    = 1U,   </code><code class="comments">//!< In case trunk signal is not relevant</code></div>
<div class="line"><code class="plain">};</code></div>
<div class="line"> </div>
<div class="line"><code class="keyword">struct</code><code class="plain"> CCalconC2WControlOutput</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	</code><code class="comments">//! Corresponding camera index</code></div>
<div class="line"><code class="plain">    ETabCameras m_camIdx{ETabCameras::CAMERA_REAR};</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Availability status of the current camera ((partially) degraded, error, running)</code></div>
<div class="line"><code class="plain">    ECamAvailabilityState m_cameraAvailability{ECamAvailabilityState::DISPLACED};</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Activation flags indicating what parts of C2W shall be active (World Calib, Relative Calib, Height Estimation)</code></div>
<div class="line"><code class="plain">    vfc::uint32_t m_c2wActivationFlags{0};</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! state providing the actual valid extrinisc, i.e. primary, secondary or none of both</code></div>
<div class="line"><code class="plain">    ETrafoUsageState m_extrinsicFlag{ETrafoUsageState::PRIMARY_TRAFO};</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Calibration Error, indicating whether a calibration error due to timeout or deviation occurred</code></div>
<div class="line"><code class="plain">    vfc::uint32_t m_calibrationError{c2w_common::gcm::GCM_CALIB_ERROR_NONE};</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Flag indicating whether the whole C2W subsystem shall currently be active (true) or pausing (false)</code></div>
<div class="line"><code class="plain">    </code><code class="comments">//! @warning For calcon base (one camera system and AR-camera) this is equal to m_cameraIsActiveForC2W</code></div>
<div class="line"><code class="plain">    </code><code class="color1">bool</code><code class="plain"> m_c2wIsActive{</code><code class="keyword">false</code><code class="plain">};</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Flag indicating whether the C2W subsystem shall use the camera (true) or not (false)</code></div>
<div class="line"><code class="plain">    </code><code class="color1">bool</code><code class="plain"> m_cameraIsActiveForC2W{</code><code class="keyword">false</code><code class="plain">};</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Flag indicating whether the calibration of the current camera is activated (true) or pausing (false)</code></div>
<div class="line"><code class="plain">    </code><code class="color1">bool</code><code class="plain"> m_c2wCameraCalibrationActive{</code><code class="keyword">false</code><code class="plain">};</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! indicates whether scene is too dark to estimate</code></div>
<div class="line"><code class="plain">    </code><code class="color1">bool</code><code class="plain"> m_isDark{</code><code class="keyword">false</code><code class="plain">};</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Flag indicating whether the C2W subsystem shall use the image (true) or not (false)</code></div>
<div class="line"><code class="plain">    </code><code class="color1">bool</code><code class="plain"> m_imageIsActiveForC2W{</code><code class="keyword">false</code><code class="plain">};</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Flag indicating whether camera was ever displaced</code></div>
<div class="line"><code class="plain">    </code><code class="color1">bool</code><code class="plain"> m_anyCamDisplacedInHighLoad{</code><code class="keyword">false</code><code class="plain">};</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Flag indicating whether trunk signal is relevant for online calibration</code></div>
<div class="line"><code class="plain">    ETrunkMode m_trunkMode{ETrunkMode::TRUNK_SIGNAL_IS_RELEVANT};</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"> </div>
<div class="line"><code class="keyword">struct</code><code class="plain"> CCalibMaxAllowedAngleDeviation</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    vfc::float32_t m_maxAllowedDeviationRollAngle ;   </code><code class="comments">//!< Maximal allowed deviation for roll angle</code></div>
<div class="line"><code class="plain">    vfc::float32_t m_maxAllowedDeviationPitchAngle;  </code><code class="comments">//!< Maximal allowed deviation for pitch angle</code></div>
<div class="line"><code class="plain">    vfc::float32_t m_maxAllowedDeviationYawAngle  ;    </code><code class="comments">//!< Maximal allowed deviation for yaw angle</code></div>
<div class="line"><code class="plain">};</code></div>
<div class="line"> </div>
<div class="line"><code class="keyword">struct</code><code class="plain"> CCalibMaxAllowedPositionalDeviation</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    vfc::float32_t m_maxAllowedDeviationHeight;</code></div>
<div class="line"><code class="plain">};</code></div>
<div class="line"> </div>
<div class="line"><code class="keyword">struct</code><code class="plain"> CCalibExtrinsics</code></div>
<div class="line"><code class="plain">{  </code></div>
<div class="line"><code class="plain">    vfc::float32_t                   m_camPositionX_mm_f32;          </code><code class="comments">// Camera Pos in X (X - componented of translation vector of c2w pose)</code></div>
<div class="line"><code class="plain">    vfc::float32_t                   m_camPositionY_mm_f32;          </code><code class="comments">// Camera Pos in Y (Y - componented of translation vector of c2w pose)</code></div>
<div class="line"><code class="plain">    vfc::float32_t                   m_camPositionZ_mm_f32;          </code><code class="comments">// Camera Pos in Z (Z - componented of translation vector of c2w pose)</code></div>
<div class="line"><code class="plain">    vfc::float32_t                   m_camNominalRoll_deg_f32;       </code><code class="comments">// nominal roll  ( nominal roll angle  - euler angle of rotation in c2w pose)</code></div>
<div class="line"><code class="plain">    vfc::float32_t                   m_camNominalPitch_deg_f32;      </code><code class="comments">// nominal pitch ( nominal pitch angle - euler angle of rotation in c2w pose)</code></div>
<div class="line"><code class="plain">    vfc::float32_t                   m_camNominalYaw_deg_f32;        </code><code class="comments">// nominal yaw   ( nominal awy angle   - euler angle of rotation in c2w pose)</code></div>
<div class="line"><code class="plain">    vfc::float32_t                   m_camRoll_deg_f32;              </code><code class="comments">// current calculated and used roll  ( dynamic roll angle  - euler angle of rotation in c2w pose)</code></div>
<div class="line"><code class="plain">    vfc::float32_t                   m_camPitch_deg_f32;             </code><code class="comments">// current calculated and used pitch ( dynamic pitch angle  - euler angle of rotation in c2w pose)</code></div>
<div class="line"><code class="plain">    vfc::float32_t                   m_camYaw_deg_f32;               </code><code class="comments">// current calculated and used yaw   ( dynamic yaw angle  - euler angle of rotation in c2w pose)</code></div>
<div class="line"><code class="plain">};</code></div>
<div class="line"> </div>
<div class="line"><code class="keyword">struct</code><code class="plain"> CCoding2C2wSingleStruct</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="comments">//! Corresponding camera index</code></div>
<div class="line"><code class="plain">    ETabCameras m_camIdx{ETabCameras::CAMERA_REAR};</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="keyword">struct</code><code class="plain"> SensorParam                          m_Intrinsic;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Primary extrinsic (camera position, nominal and current orientation) [for one camera]</code></div>
<div class="line"><code class="plain">    CCalibExtrinsics                            m_primaryExtrinsic;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Secondary extrinsic (camera position, nominal and current orientation) [for one camera]</code></div>
<div class="line"><code class="plain">    CCalibExtrinsics                            m_secondaryExtrinsic;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Maximum allowed angular deviation of online calibration [for one camera and each angle]</code></div>
<div class="line"><code class="plain">    CCalibMaxAllowedAngleDeviation              m_calibMaxDeviation;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Maximum allowed positional deviation of online calibration [for one camera and each angle]</code></div>
<div class="line"><code class="plain">    CCalibMaxAllowedPositionalDeviation         m_calibMaxPositionalDeviation;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Maximum allowed deviation for end of line calibration [for one camera and each angle]</code></div>
<div class="line"><code class="plain">    CCalibMaxAllowedAngleDeviation              m_eolMaxDeviation;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Wheelbase (distance between front axle and rear axle)</code></div>
<div class="line"><code class="plain">    vfc::float32_t                              m_vehicleWheelbase;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Maximum allowed time to finish calibration cycle within one clamp cycle (otherwise, the TIMEOUT DemEvent</code></div>
<div class="line"><code class="plain">    </code><code class="comments">//! will be triggered) - Don't mix up with the variable m_maxAllowedTimeNotFullyCalib</code></div>
<div class="line"><code class="plain">    vfc::float32_t                              m_calibMaxTimeToCalibrate;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! min velocity threshold for calibratiomn</code></div>
<div class="line"><code class="plain">    vfc::float32_t                              m_minVelocityThreshold;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! max velocity threshold for calibratiomn</code></div>
<div class="line"><code class="plain">    vfc::float32_t                              m_maxVelocityThreshold;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! steering threshold for calibration (absolute value will be used)</code></div>
<div class="line"><code class="plain">    vfc::float32_t                              m_steeringThreshold;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! bitflag indicating which cameras have flaps</code></div>
<div class="line"><code class="plain">    vfc::uint32_t                               m_camFlapFlags;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! bitflag indicating which calibration behavior is activated</code></div>
<div class="line"><code class="plain">    vfc::uint32_t                               m_c2wBehaviorFlags;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! bitflag indicating which calibration control behavior is activated (not yet used)</code></div>
<div class="line"><code class="plain">    vfc::uint32_t                               m_c2wControlFlags;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! bitflag indicating which calibration part is activated</code></div>
<div class="line"><code class="plain">    vfc::uint32_t                               m_c2wActivationFlags;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Is the given data default (= true) or not (= false)?</code></div>
<div class="line"><code class="plain">    vfc::uint32_t                               m_codingDataIsDefault;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! lidar in car [0: no, 1: yes] (taken from coding) - necessary for switching  minor parameter set</code></div>
<div class="line"><code class="plain">    vfc::uint8_t                                m_lidarAvailable;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Rear axle steering available [0: no, 1: yes] (taken from coding)</code></div>
<div class="line"><code class="plain">    vfc::uint8_t                                m_rearAxleSteeringAvailable;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! rear doors available [0: no, 1: yes] (taken from coding)</code></div>
<div class="line"><code class="plain">    vfc::uint8_t                                m_rearDoorsAvailable;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! camera kinematic available [0: no, 1: yes] (taken from coding; will only be used for front camera)</code></div>
<div class="line"><code class="plain">    vfc::uint8_t                                m_camKinematicAvailable;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Number of cycles for EOL Calibration (i.e., the number how often we require line segments based on the</code></div>
<div class="line"><code class="plain">    </code><code class="comments">//! previous intermediate EOL calibration result to calculate a new result. Default: 2)</code></div>
<div class="line"><code class="plain">    vfc::uint8_t                                m_eolNumberOfCycles;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Number of iterations for EOL Calibration (i.e., the number how many different line segment inputs we</code></div>
<div class="line"><code class="plain">    </code><code class="comments">//! take into account in the last cycle [see above] of the EOL calibration to average/smooth the result. Default: 20)</code></div>
<div class="line"><code class="plain">    vfc::uint8_t                                m_eolNumberOfIterations;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Whether the check for not being fully calibrated is active (=true) or not active (=false)</code></div>
<div class="line"><code class="plain">    </code><code class="color1">bool</code><code class="plain">                                        m_checkForNotFullyCalibActive;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Maximum time, the calibration is allowed to be not in fully calibrated. This is the threshold over multiple</code></div>
<div class="line"><code class="plain">    </code><code class="comments">//! clamp cycles (in contrast to variable m_calibMaxTimeToCalibrate).</code></div>
<div class="line"><code class="plain">    vfc::float32_t                              m_maxAllowedTimeNotFullyCalib;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Number of calibration timeouts per camera causing a timeout error via EVM event (DTC)</code></div>
<div class="line"><code class="plain">    </code><code class="comments">//! Note that the default value must be at least 1. Otherwise it would result in a direct timeout before</code></div>
<div class="line"><code class="plain">    </code><code class="comments">//! we would be able to calibrate</code></div>
<div class="line"><code class="plain">    vfc::uint32_t                               m_numberOfCalibTimeoutsForEvmEvent;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Number of calibration timeouts per camera causing an internal error which is set via tramo</code></div>
<div class="line"><code class="plain">    </code><code class="comments">//! Note: We assume that m_maxNumberOfCalibTimeoutBeforeInternalError <= m_maxNumberOfCalibTimeoutsBeforeEvmEvent</code></div>
<div class="line"><code class="plain">    </code><code class="comments">//! Also the default value must be at least 1. Otherwise it would result in a direct timeout before</code></div>
<div class="line"><code class="plain">    </code><code class="comments">//! we would be able to calibrate</code></div>
<div class="line"><code class="plain">    vfc::uint32_t                               m_numberOfCalibTimeoutForInternalError;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">//! Mode stating whether trunk singnal is relevant for online calibration</code></div>
<div class="line"><code class="plain">    ETrunkMode                                  m_trunkMode;</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
<p   
><br/></p>
    </div>
    <div class="section section-2" id="src-4475305623_safe-id-T25saW5lQ2FsaWJyYXRpb27ljY_orq7mlofmoaMt5qih5byP5a6a5LmJ">
        <h2 class="heading "><span> Pattern definition </span></h2>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">enum</code><code class="plain"> EOnlineCalibrationMode : vfc::uint32_t </code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">     SLEEPING         = 0U,</code></div>
<div class="line"><code class="plain">     MONITORING       = 1U, </code><code class="comments">// online monitor the extrinic paramaters, low computation loading</code></div>
<div class="line"><code class="plain">     ROUND_ROBIN      = 2U, </code><code class="comments">// run online calibratio by time slicing</code></div>
<div class="line"><code class="plain">     FULL_RUNNING     = 3U, </code><code class="comments">// running full online calibration algorithm</code></div>
<div class="line"><code class="plain">};</code></div>
</div>
    </div>
<p   
> Remark: </p>
<p   
> 1. When the system does not meet certain operating conditions, State Manager sets the system to the Sleeping mode (of extractor and oncalcore will completely stop running) </p>
<p   
> 2. Receive upstream requests and enter the monitoring mode. State Manager sets the system to Monitoring mode (this mode is not enabled for the time being) </p>
<p   
> 3. Due to the high system load and other reasons, the full function cannot be run, state manager sets the system to the Round_robin mode (not enabled for the time being, wait for the subsequent evaluation system load) </p>
<p   
> 4. To meet all operating conditions, State Manager sets the system to Full_running mode </p>
    </div>
    </div>
    <div class="section section-1" id="src-4475305623_safe-id-T25saW5lQ2FsaWJyYXRpb27ljY_orq7mlofmoaMtT25DYWxDb3Jl">
        <h1 class="heading "><span>OnCalCore</span></h1>
<p   
> enter </p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> enter Port</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>local_loc</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>xodom</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>viper_lane</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>viper_mot</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>lidar_calib_preprocess</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>oncal_control</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><del class=" ">oncal_event</del></p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p   
><br/></p>
<p   
> Output </p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
> Output port </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>oncal_status</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>nrcs_calib_result</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>nrcs_calib_fault_event???</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>nrcs_sensor_xxtrinsic</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><br/></p>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p   
><br/></p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">enum</code><code class="plain"> EOnCalStatus : vfc::uint32_t </code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">     SLEEPING      = 0U,</code></div>
<div class="line"><code class="plain">     RUNNING       = 1U,</code></div>
<div class="line"><code class="plain">     ERROR         = 2U,</code></div>
<div class="line"><code class="plain">};</code></div>
</div>
    </div>
<p   
><br/></p>
    <div class="section section-2" id="src-4475305623_safe-id-T25saW5lQ2FsaWJyYXRpb27ljY_orq7mlofmoaMt5YWx5Lqr5YWo5bGA5Y-Y6YeP">
        <h2 class="heading "><span> Share global variables </span></h2>
<p   
> AOS only supports the direction of the direction without a ring, so here is a Share Global Variables way to give to extractor </p>
<p   
><strong class=" "> Relcal virtual camera parameter </strong></p>
<p   
><br/></p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">struct</code><code class="plain"> CVirtualCamInputParams</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="comments">// intrinsic parameters of virtual cam</code></div>
<div class="line"><code class="plain">    vfc::float32_t                         m_virtualCamPrincipalPointX; </code><code class="comments">//!< x coordinate of principial point for the virtual cam</code></div>
<div class="line"><code class="plain">    vfc::float32_t                         m_virtualCamPrincipalPointY; </code><code class="comments">//!< y coordinate of principial point for the virtual cam</code></div>
<div class="line"><code class="plain">    vfc::float32_t                         m_virtualCamFocalLengthX;    </code><code class="comments">//!< focal length in x direction of the virtual cam</code></div>
<div class="line"><code class="plain">    vfc::float32_t                         m_virtualCamFocalLengthY;    </code><code class="comments">//!< focal length in y direction of the virtual cam</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    </code><code class="comments">// rotation and translation between virtual and original cam</code></div>
<div class="line"><code class="plain">    vfc::linalg::TMatrix33<vfc::float32_t> m_rotationVirtual2OriginalCam;   </code><code class="comments">//!< rotation matrix describing rotation from virtual to original cam</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    vfc::float32_t                         m_cameraHeight;   </code><code class="comments">//!< height of original camera </code></div>
<div class="line"><code class="plain">    vfc::float32_t                         m_targetDistance; </code><code class="comments">//!< minimum distance from camera on ground floor for rectified image content</code></div>
<div class="line"><code class="plain">};</code></div>
<div class="line"> </div>
<div class="line"><code class="keyword">struct</code><code class="plain"> CStereoInput</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    vfc::uint32_t                      m_userID;        </code><code class="comments">//!< identifier for request</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    ETabCameras                        m_cameraId1_e;  </code><code class="comments">//!< camera id of first cam</code></div>
<div class="line"><code class="plain">    ETabCameras                        m_cameraId2_e;  </code><code class="comments">//!< camera id of second cam</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">    CVirtualCamInputParams             m_params1;      </code><code class="comments">//!< parameters of first cam</code></div>
<div class="line"><code class="plain">    CVirtualCamInputParams             m_params2;      </code><code class="comments">//!< parameters of second cam</code></div>
<div class="line"><code class="plain">};</code></div>
</div>
    </div>
<p   
><br/></p>
<p   
><br/></p>
    </div>
    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="4192443250_Intrinsics_Update_Deveopment_Specification.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Intrinsics Update Deveopment Specification</span>
        </a>
                <a href="4475313543_tips_for_online_calibration_development.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>tips for online calibration development</span>
        </a>
    </nav>    
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>


    <script src="assets/js/expand-macro.js"></script>
</body>
</html>
